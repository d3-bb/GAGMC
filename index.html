<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="sitelogo.ico" type="image/x-icon" />
  <link rel="stylesheet" href="style.css">
  <meta charset="UTF-8" />
  <title>Grow A Garden Mutation Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #000; /* midnight default */
      color: #eee;
      display: flex;
      flex-direction: row;
      gap: 30px;
      transition: background-color 0.3s, color 0.3s;
    }
    .main {
      flex: 2;
    }
    h1 {
      text-align: center;
    }
    .controls {
      display: flex;
      gap: 10px;
      margin: 10px 0;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }
    select#themeSelector {
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .buttons-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
      margin-bottom: 20px;
    }
    button {
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s, filter 0.3s;
    }
    button.active {
      filter: brightness(70%);
    }
    #output {
      font-size: 1.5em;
      font-weight: bold;
      text-align: center;
      margin-top: 20px;
    }
    .sidebar {
      flex: 1;
      background: #111;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      max-height: 90vh;
      overflow-y: auto;
      color: #eee;
      transition: background-color 0.3s, color 0.3s;
    }
    /* Save Entry Styles per theme */
    .save-entry {
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 5px;
      border-left: 5px solid #4caf50;
      background: #222;
      color: #ddd;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    input[type="text"] {
      flex: 1;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #555;
      background: #222;
      color: #eee;
      transition: border-color 0.3s;
    }
    input[type="text"]:focus {
      outline: none;
      border-color: #4caf50;
    }
    .clear-button {
      display: block;
      margin: 20px auto 0;
      padding: 10px 20px;
      background-color: #ff4d4d;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .clear-button:hover {
      background-color: #d11a2a;
    }

    /* Theme classes */
    body.theme-light {
      background: #f4f4f4;
      color: #000;
    }
    body.theme-light .sidebar {
      background: #fff;
      color: #000;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    body.theme-light .save-entry {
      background: #e3ffe3;
      color: #000;
      border-color: #4caf50;
    }
    body.theme-light input[type="text"] {
      background: #fff;
      color: #000;
      border: 1px solid #ccc;
    }

    body.theme-midnight {
      background: #000;
      color: #eee;
    }
    body.theme-midnight .sidebar {
      background: #111;
      color: #eee;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    body.theme-midnight .save-entry {
      background: #222;
      color: #ddd;
      border-color: #66bb6a;
    }
    body.theme-midnight input[type="text"] {
      background: #222;
      color: #eee;
      border: 1px solid #555;
    }

    body.theme-rainbow {
      background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
      color: #000;
    }
    body.theme-rainbow .sidebar {
      background: #fff8dc;
      color: #222;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    body.theme-rainbow .save-entry {
      background: linear-gradient(to right, #ff9a9e, #fad0c4);
      color: #440000;
      border-color: #ff4081;
    }
    body.theme-rainbow input[type="text"] {
      background: #fff;
      color: #000;
      border: 1px solid #ccc;
    }

    body.theme-pink {
      background: #ffe6f0;
      color: #333;
    }
    body.theme-pink .sidebar {
      background: #fff0f6;
      color: #333;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    body.theme-pink .save-entry {
      background: #ffcce3;
      color: #660033;
      border-color: #ff69b4;
    }
    body.theme-pink input[type="text"] {
      background: #fff;
      color: #333;
      border: 1px solid #ccc;
    }

    body.theme-dark {
      background: #121212;
      color: #eee;
    }
    body.theme-dark .sidebar {
      background: #222;
      color: #eee;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    body.theme-dark .save-entry {
      background: #333;
      color: #eee;
      border-color: #81c784;
    }
    body.theme-dark input[type="text"] {
      background: #333;
      color: #eee;
      border: 1px solid #555;
    }
  </style>
</head>
<body class="theme-midnight">
  <div class="main">
    <h1>Grow a Garden Mutation Calculator</h1>
    <div class="controls">
      <label for="themeSelector">Theme:</label>
      <select id="themeSelector" aria-label="Select theme">
        <option value="midnight" selected>Midnight</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
        <option value="rainbow">Rainbow</option>
        <option value="pink">Pink</option>
      </select>
      <input type="text" id="saveName" placeholder="Enter crop name..." />
      <button onclick="saveConfiguration()">Save</button>
    </div>
    <div class="buttons-container" id="buttons"></div>
    <div id="output">Mutation Multiplier: 0</div>
    <button class="clear-button" onclick="clearSelections()">Clear Selections</button>
  </div>
  <div class="sidebar">
    <h3>Saved Configurations</h3>
    <div id="saves"></div>
  </div>

  <script>
    const values = {
      "ðŸŒŸ Gold": 20,
      "ðŸŒˆ Rainbow": 50,
      "ðŸ’§ Wet": 2,
      "ðŸƒ Windstruck": 2,
      "ðŸŒ™ Moonlit": 2,
      "ðŸº Clay": 3,
      "â„ï¸ Chilled": 2,
      "ðŸ« Choc": 2,
      "ðŸŒ¼ Pollinated": 3,
      "ðŸ–ï¸ Sandy": 3,
      "ðŸ©¸ Bloodlit": 4,
      "ðŸŒ€ Twisted": 5,
      "ðŸŒŠ Drenched": 5,
      "â˜ï¸ Cloudtouched": 5,
      "ðŸ¥¶ Frozen": 10,
      "ðŸŒªï¸ Tempestuous": 19,
      "ðŸŒŒ Aurora": 90,
      "âš¡ Shocked": 100,
      "âœ¨ Celestial": 120,
      "ðŸ”¥ Burnt": 4,
      "ðŸŒ¿ Verdant": 4,
      "ðŸŒ¾ Wiltproof": 4,
      "âš›ï¸ Plasma": 5,
      "ðŸ¯ HoneyGlazed": 5,
      "ðŸ˜‡ Heavenly": 5,
      "ðŸŸ Fried": 8,
      "ðŸ§¡ Amber": 10,
      "ðŸ³ Cooked": 10,
      "ðŸ•°ï¸ OldAmber": 20,
      "ðŸ§Ÿ Zombified": 25,
      "ðŸŒ‹ Molten": 25,
      "ðŸº Ceramic": 30,
      "ðŸ‘´ AncientAmber": 50,
      "ðŸ‘« Friendbound": 70,
      "ðŸ¦  Infected": 75,
      "ðŸŒž Sundried": 85,
      "ðŸï¸ Paradisal": 100,
      "ðŸ‘½ Alienlike": 100,
      "ðŸš€ Galactic": 120,
      "ðŸ’ƒ Disco": 125,
      "â˜„ï¸ Meteoric": 125,
      "ðŸŒ‘ Voidtouched": 135,
      "ðŸŒ… Dawnbound": 150,
      "ðŸ“œ Historic Amber": 150
    };

    const colorHints = {
      "ðŸŒŸ Gold": '#FFD700',
      "ðŸŒˆ Rainbow": 'linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet)',
      "ðŸ’§ Wet": '#89CFF0',
      "ðŸƒ Windstruck": '#B0E0E6',
      "ðŸŒ™ Moonlit": '#C0C0C0',
      "ðŸº Clay": '#B66A50',
      "â„ï¸ Chilled": '#AFEEEE',
      "ðŸ« Choc": '#D2691E',
      "ðŸŒ¼ Pollinated": '#FDEE00',
      "ðŸ–ï¸ Sandy": '#F4A460',
      "ðŸ©¸ Bloodlit": '#8B0000',
      "ðŸŒ€ Twisted": '#800080',
      "ðŸŒŠ Drenched": '#1E90FF',
      "â˜ï¸ Cloudtouched": '#E0FFFF',
      "ðŸ¥¶ Frozen": '#ADD8E6',
      "ðŸŒªï¸ Tempestuous": '#708090',
      "ðŸŒŒ Aurora": '#7FFFD4',
      "âš¡ Shocked": '#FFFF33',
      "âœ¨ Celestial": '#E6E6FA',
      "ðŸ”¥ Burnt": '#8B4513',
      "ðŸŒ¿ Verdant": '#228B22',
      "ðŸŒ¾ Wiltproof": '#006400',
      "âš›ï¸ Plasma": '#FF69B4',
      "ðŸ¯ HoneyGlazed": '#FFA500',
      "ðŸ˜‡ Heavenly": '#E0FFFF',
      "ðŸŸ Fried": '#FF8C00',
      "ðŸ§¡ Amber": '#FFBF00',
      "ðŸ³ Cooked": '#CD853F',
      "ðŸ•°ï¸ OldAmber": '#D2B48C',
      "ðŸ§Ÿ Zombified": '#556B2F',
      "ðŸŒ‹ Molten": '#FF4500',
      "ðŸº Ceramic": '#FFF8DC',
      "ðŸ‘´ AncientAmber": '#DAA520',
      "ðŸ‘« Friendbound": '#FFB6C1',
      "ðŸ¦  Infected": '#8B008B',
      "ðŸŒž Sundried": '#FFDEAD',
      "ðŸï¸ Paradisal": '#00CED1',
      "ðŸ‘½ Alienlike": '#7CFC00',
      "ðŸš€ Galactic": '#6A5ACD',
      "ðŸ’ƒ Disco": '#FF00FF',
      "â˜„ï¸ Meteoric": '#DC143C',
      "ðŸŒ‘ Voidtouched": '#2F4F4F',
      "ðŸŒ… Dawnbound": '#FFDAB9',
      "ðŸ“œ Historic Amber": '#F5DEB3'
    };

    const buttonsContainer = document.getElementById('buttons');
    const output = document.getElementById('output');
    const saveNameInput = document.getElementById('saveName');
    const savesContainer = document.getElementById('saves');
    const themeSelector = document.getElementById('themeSelector');

    const state = {};
    const buttonElements = {};

    function createButtons() {
      buttonsContainer.innerHTML = '';
      for (const key in values) {
        state[key] = false;
        const btn = document.createElement('button');
        btn.textContent = key;
        btn.dataset.key = key;
        buttonElements[key] = btn;

        if (colorHints[key]) {
          if (colorHints[key].startsWith('linear-gradient')) {
            btn.style.background = colorHints[key];
            btn.style.color = '#000';
          } else {
            btn.style.backgroundColor = colorHints[key];
            btn.style.color = '#000';
          }
        }

        btn.addEventListener('click', () => {
          state[key] = !state[key];
          btn.classList.toggle('active');
          calculate();
        });
        buttonsContainer.appendChild(btn);
      }
    }

    createButtons();

    function calculate() {
      let base = 0;
      let othersTotal = 0;
      let othersCount = 0;

      for (const key in state) {
        if (state[key]) {
          if (key.includes('Rainbow') || key.includes('Gold')) {
            base += values[key];
          } else {
            othersTotal += values[key];
            othersCount++;
          }
        }
      }

      const result = base + (1 + othersTotal - othersCount);
      output.textContent = `Mutation Multiplier: ${result}`;
      return result;
    }

    function saveConfiguration() {
      const name = saveNameInput.value.trim();
      if (!name) return alert("Please enter a name for this save.");

      const activeKeys = Object.keys(state).filter(k => state[k]);
      const result = calculate();

      const entry = document.createElement('div');
      entry.className = 'save-entry';
      entry.innerHTML = `<h4>${name}</h4><p>Active: ${activeKeys.join(", ") || 'None'}</p><p>Multiplier: ${result}</p>`;
      savesContainer.prepend(entry);

      saveNameInput.value = '';
    }

    function clearSelections() {
      for (const key in state) {
        state[key] = false;
        buttonElements[key].classList.remove('active');
      }
      calculate();
    }

    function applyTheme(theme) {
      document.body.classList.remove('theme-light', 'theme-midnight', 'theme-rainbow', 'theme-pink', 'theme-dark');
      document.body.classList.add(`theme-${theme}`);
    }

    themeSelector.addEventListener('change', () => {
      applyTheme(themeSelector.value);
    });

    // Initialize default theme to midnight
    applyTheme(themeSelector.value);
  </script>
</body>
</html>
